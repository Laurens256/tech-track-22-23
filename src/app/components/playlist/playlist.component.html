<header [ngClass]="{'visualisationopen' : visualisationOpen}">
  <button (click)="this.backPage()" class="back" aria-label="back to playlists">Back</button>
  <section class="info">
    <img #playlistImg *ngIf="playlist != undefined" src="{{playlist.images[0].url}}" alt="playlist icon"
      crossorigin="anonymous">
    <div *ngIf="playlist != undefined">
      <h1>{{playlist.name}}</h1>
      <p>{{playlist.description}}</p>
    </div>
    <p>
      <ng-container *ngIf="loading">Loading: </ng-container>{{playlistTotal}} song<ng-container
        *ngIf="playlistTotal > 1">s</ng-container>
      <ng-container *ngIf="loading">...
      </ng-container>
      <ng-container *ngIf="!loading"> - {{playlistDuration | date:'HH:mm':'+0000'}}</ng-container>
    </p>
  </section>

  <section [ngClass]="{'open' : visualisationOpen}" class="visualisation">
    <div>
      <app-visualisation [data]="visualisationData" [isOpen]="visualisationOpen" [hasVisData]="hasVisData">
      </app-visualisation>
    </div>

    <svg class="instrumental" id="instrumentalBg" viewBox="0 0 1200 800" xml:space="preserve"
      xmlns="http://www.w3.org/2000/svg">
      <style>
        #instrumentalBg .low path {
          fill: url(#fill-color) var(--spotify-green);
        }

        #instrumentalBg .mid path {
          fill: red;
        }

        #instrumentalBg .high path {
          fill: blue;
        }
      </style>
      <defs>
        <linearGradient id="fill-color" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color:var(--note-color-1)" />
          <stop offset="100%" style="stop-color:var(-note-color-2)" />
        </linearGradient>
        <radialGradient id="fill-color2" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
          <stop offset="0%" style="stop-color:var(--note-color-1);" />
          <stop offset="100%" style="stop-color:var(--note-color-2);" />
        </radialGradient>
      </defs>
      <g class="low">
        <g transform="translate(417.85 158.91) rotate(166.6) scale(1.05)">
          <path
            d="m564.2 393.5c-4-14.7-7.1-28.5-10.5-43.7-0.8-3.9 1.9-7.3 4.6-9.7 2.4-2.3 5.5-4.1 8.9-4.1 3.1-0.4 6.7 1 7.6 4.3 1.1 3.7-0.8 7.9-3.8 10.2-2.8 2.7-6.9 4.1-10.8 3.6-1.9-0.1-2 1.6-1.8 3.2 2.6 11.8 5.2 23.5 8 35.3 0.3 1.1-2 2-2.2 0.9z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(.38 439.03) rotate(131.04) scale(1.11)">
          <path
            d="m587.2 385.7c-12.5-10.2-23.6-20.2-35.8-31.1-3.1-2.9-2.8-7.4-2-11.2 0.6-3.5 2.2-6.9 5.1-9 2.4-2.2 6.4-3.2 9.1-1 3.2 2.5 4.2 7.3 3 11.1-0.8 4-3.4 7.7-7.1 9.7-1.7 1-0.7 2.6 0.4 3.8 9.5 8.5 19 17 28.5 25.4 1.1 1-0.2 3.1-1.2 2.3z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(243.46 711.08) rotate(129.56) scale(.98)">
          <path
            d="m595.9 397c-11.2-8.7-21.3-17.3-32.3-26.6-2.8-2.4-2.7-6.5-2-9.8 0.5-3.1 1.8-6.1 4.3-8.1 2.1-2 5.6-3 8-1.1 2.9 2.2 3.8 6.3 2.9 9.7-0.6 3.6-2.9 6.9-6 8.7-1.5 0.9-0.6 2.3 0.4 3.4 8.6 7.3 17.1 14.6 25.8 21.8 0.9 0.7-0.2 2.7-1.1 2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(692.98 108.37) rotate(280.11) scale(1.04)">
          <path
            d="m559 340.9c14.9 2.2 28.7 4.8 43.8 7.8 3.9 0.8 5.9 4.6 7 8.1 1.2 3.1 1.5 6.6 0.2 9.7-0.8 3-3.6 5.7-6.9 5.2-3.8-0.5-6.8-3.8-7.7-7.5-1.3-3.6-1-7.9 1-11.2 0.9-1.6-0.7-2.4-2.2-2.9-11.7-2.3-23.4-4.6-35.2-6.7-1.1-0.3-1.1-2.7 0-2.5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(279.86 650.75) rotate(45.12) scale(.92)">
          <path
            d="m595.5 360.1c-9.1 9.7-18.1 18.3-27.8 27.8-2.5 2.4-6.3 1.9-9.4 1-2.8-0.7-5.6-2.2-7.1-4.8-1.7-2.1-2.3-5.5-0.3-7.6 2.3-2.5 6.2-3 9.3-1.8 3.3 0.9 6.2 3.3 7.6 6.4 0.7 1.5 2.1 0.7 3.2-0.1 7.6-7.3 15.2-14.7 22.7-22.1 0.8-0.8 2.5 0.5 1.8 1.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(562.22 467.06) rotate(9.05) scale(1.03)">
          <path
            d="m581.9 345.3c-1.9 14.8-4.3 28.5-6.9 43.5-0.7 3.8-4.5 5.9-7.8 7-3 1.2-6.5 1.6-9.6 0.4-2.9-0.8-5.7-3.5-5.2-6.7 0.4-3.8 3.7-6.8 7.2-7.8 3.6-1.3 7.8-1.1 11.1 0.8 1.6 0.8 2.4-0.7 2.8-2.2 2.1-11.6 4.1-23.3 6-35 0.2-1.1 2.5-1.1 2.4 0z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(904.37 416.17) rotate(75.78) scale(1.16)">
          <path
            d="m613.4 347.9c-16.2 4.7-31.4 8.3-48.1 12.2-4.3 1-8.1-2-10.8-5-2.6-2.6-4.6-6-4.7-9.8-0.5-3.4 1.1-7.4 4.6-8.4 4.1-1.3 8.7 0.7 11.3 4 3 3.1 4.6 7.6 4.1 11.8-0.1 2.1 1.8 2.1 3.5 1.9 13-3.1 25.9-6.1 38.8-9.4 1.5-0.1 2.5 2.4 1.3 2.7z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(1094.6 602) rotate(153.02) scale(1.18)">
          <path
            d="m593.6 384.2c-8.2-15-15.3-29.3-22.9-44.9-1.9-4 0.2-8.5 2.5-11.8 2-3.2 4.9-5.9 8.7-6.8 3.3-1.3 7.6-0.6 9.4 2.7 2.2 3.8 1.2 8.8-1.4 12.1-2.4 3.7-6.5 6.2-10.8 6.7-2.1 0.3-1.7 2.3-1.1 4 5.9 12.2 11.9 24.3 18 36.4 0.4 1.1-1.8 2.7-2.4 1.6z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(235.85 106.64) rotate(125.86) scale(.82)">
          <path
            d="m581.9 388.3c-9.9-6.6-18.7-13.3-28.4-20.5-2.5-1.9-2.6-5.3-2.2-8.1 0.2-2.6 1.2-5.2 3.2-7 1.6-1.8 4.5-2.8 6.7-1.3 2.5 1.6 3.5 5.1 2.9 7.9-0.3 3-2 5.9-4.6 7.6-1.2 0.9-0.4 1.9 0.6 2.8 7.5 5.6 15.1 11.3 22.7 16.8 0.7 0.7-0.2 2.4-0.9 1.8z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(887.18 319.43) rotate(39.67) scale(1.14)">
          <path
            d="m615.8 343.5c-10.1 13.1-20.1 24.7-31.1 37.5-2.9 3.2-7.6 3.1-11.4 2.3-3.6-0.5-7.1-2.1-9.4-5.1-2.4-2.4-3.5-6.5-1.2-9.4 2.5-3.4 7.4-4.5 11.3-3.4 4.2 0.7 8 3.3 10.1 7 1.1 1.7 2.7 0.7 3.9-0.5 8.5-9.9 17-19.9 25.4-29.9 0.9-0.8 3.2 0.5 2.4 1.5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(708.49 281.46) rotate(18.84) scale(.84)">
          <path
            d="m581.7 333.3c-3.6 11.6-7.4 22.3-11.6 34-1.1 3-4.4 4.1-7.3 4.6-2.6 0.6-5.5 0.4-7.8-1-2.3-1-4.1-3.6-3.3-6.1 0.8-3 3.9-5 6.9-5.3 3.1-0.6 6.4 0.2 8.8 2.2 1.2 0.9 2-0.2 2.6-1.4 3.3-9.1 6.5-18.2 9.7-27.3 0.3-0.9 2.3-0.6 2 0.3z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(376.51 690.13) rotate(99.76) scale(1.09)">
          <path
            d="m593.7 384.1c-15.7-2.2-30.1-4.9-45.9-7.8-4-0.8-6.2-4.8-7.4-8.4-1.3-3.2-1.6-6.9-0.3-10.2 0.9-3.1 3.7-6 7.2-5.5 4 0.5 7.2 4 8.2 7.8 1.4 3.8 1 8.2-1 11.7-0.9 1.7 0.7 2.5 2.3 3 12.3 2.3 24.6 4.6 36.9 6.8 1.2 0.2 1.2 2.8 0 2.6z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(4.09 544.66) rotate(104.86) scale(1.17)">
          <path
            d="m597.2 378.4c-16.5-3.8-31.7-8.1-48.4-12.8-4.3-1.3-6.1-5.7-7.1-9.7-1-3.6-1.1-7.6 0.7-10.9 1.2-3.2 4.6-6 8.2-5.2 4.2 0.9 7.3 4.9 8 9.1 1.1 4.2 0.3 8.9-2.2 12.4-1.1 1.8 0.5 2.8 2.2 3.5 12.9 3.7 25.9 7.3 38.8 10.8 1.3 0.5 1.1 3.2-0.2 2.8z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(322.2 248.69) rotate(131.48) scale(1.06)">
          <path
            d="m588.2 395c-11.8-9.8-22.4-19.4-34-30-2.9-2.7-2.6-7.1-1.8-10.7 0.6-3.3 2.2-6.6 5-8.6 2.3-2.1 6.2-3 8.7-0.9 3.1 2.4 3.9 7 2.8 10.6-0.8 3.8-3.3 7.4-6.8 9.2-1.6 1-0.7 2.4 0.4 3.7 9 8.2 18 16.4 27.1 24.5 0.8 0.9-0.5 3-1.4 2.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(205.82 103.84) rotate(10.42) scale(.83)">
          <path
            d="m583.8 349.9c-1.8 11.9-4 22.9-6.4 34.9-0.7 3.1-3.7 4.7-6.5 5.5-2.5 0.9-5.3 1.2-7.8 0.1-2.4-0.7-4.5-2.9-4.1-5.5 0.4-3 3.1-5.4 6-6.1 2.9-1 6.3-0.7 8.9 0.9 1.3 0.7 1.9-0.5 2.3-1.7 1.9-9.3 3.7-18.7 5.5-28.1 0.4-1 2.3-0.9 2.1 0z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(58.09 532.47) rotate(315.64) scale(1.07)">
          <path
            d="m568.3 346.6c11.2 10.7 21.1 21.2 32 32.7 2.7 3 2.1 7.4 1 10.9-0.9 3.3-2.7 6.4-5.6 8.3-2.5 2-6.4 2.6-8.8 0.2-2.9-2.7-3.4-7.3-2-10.9 1.1-3.8 3.9-7.2 7.5-8.7 1.7-0.9 0.9-2.4-0.1-3.7-8.4-8.9-16.9-17.8-25.5-26.6-0.9-1 0.6-3 1.5-2.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(746.01 102.32) rotate(113.62) scale(.96)">
          <path
            d="m602.3 367.5c-12.9-5.2-24.7-10.5-37.6-16.4-3.3-1.6-4.3-5.4-4.5-8.7-0.4-3 0.1-6.3 1.9-8.8 1.4-2.5 4.5-4.3 7.3-3.2 3.3 1.2 5.3 4.9 5.3 8.4 0.4 3.5-0.8 7.3-3.3 9.8-1.1 1.3 0.1 2.3 1.3 3.1 10 4.6 20.1 9.1 30.1 13.6 1 0.4 0.5 2.6-0.5 2.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(812.58 474.55) rotate(253.89) scale(.94)">
          <path
            d="m543.4 360.5c13-4.2 25.2-7.5 38.6-11.2 3.5-0.9 6.6 1.4 8.9 3.7 2.2 2 3.9 4.7 4 7.8 0.5 2.7-0.7 6.1-3.5 6.9-3.3 1.1-7.1-0.4-9.3-3-2.5-2.4-3.9-6-3.6-9.5 0-1.7-1.5-1.7-2.9-1.5-10.4 2.8-20.8 5.7-31.2 8.6-1 0.5-2-1.5-1-1.8z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(875.75 523.17) rotate(126.21) scale(.87)">
          <path
            d="m585.4 383c-10.4-7.1-19.8-14.2-30-21.9-2.6-2-2.7-5.6-2.3-8.6 0.3-2.8 1.3-5.5 3.4-7.4 1.7-1.9 4.8-2.9 7.1-1.4 2.7 1.8 3.7 5.4 3.1 8.4-0.4 3.2-2.2 6.3-4.9 8-1.2 0.9-0.4 2.1 0.6 3 8 6 15.9 12 24 18 0.7 0.7-0.2 2.5-1 1.9z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(822.82 249.43) rotate(14.52) scale(.88)">
          <path
            d="m608.7 342.6c-2.8 12.4-5.9 23.9-9.4 36.4-0.9 3.2-4.3 4.6-7.2 5.4-2.7 0.8-5.7 0.9-8.2-0.5-2.4-0.9-4.6-3.4-3.9-6.1 0.6-3.2 3.7-5.5 6.8-6 3.1-0.9 6.7-0.3 9.4 1.6 1.3 0.8 2.1-0.4 2.6-1.6 2.7-9.7 5.4-19.5 7.9-29.3 0.2-1 2.2-0.8 2 0.1z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="1;1;1;0;0;0;0;0;1"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(1191.1 589.93) rotate(171.31) scale(.97)">
          <path
            d="m569 382.3c5.3-0.6 9.4-3.3 9.4-3.3l-1.5-9.9c0.6 0.1 1.2 0.1 1.9-0.2 1.4-0.6 2.1-1.9 1.7-3-0.5-1.1-1.9-1.5-3.3-1-1.3 0.5-2.1 1.8-1.8 2.8l1.1 7.4s-2.9 1.5-6.9 2.4l-0.8-5.5c0.6 0.1 1.2 0.1 1.8-0.2 1.4-0.6 2.1-1.9 1.7-3-0.5-1.1-1.9-1.5-3.3-1-1.2 0.5-1.9 1.6-1.8 2.6l1.8 11.9z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(286.49 434.15) rotate(184.1) scale(1.11)">
          <path
            d="m578 376.7c6.1 0.6 11.3-1.3 11.3-1.3l0.8-11.5c0.6 0.3 1.4 0.4 2.2 0.3 1.7-0.3 2.9-1.6 2.7-2.9s-1.8-2.2-3.5-1.9c-1.6 0.3-2.7 1.5-2.7 2.7l-0.6 8.6s-3.6 1-8.3 1l0.5-6.4c0.6 0.3 1.3 0.4 2.1 0.3 1.7-0.3 2.9-1.6 2.7-2.9s-1.8-2.2-3.5-1.9c-1.5 0.3-2.6 1.3-2.7 2.4l-1 13.5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(805.18 536.23) rotate(290.8) scale(1.16)">
          <path
            d="m556.9 339.6c-2.5 5.9-2.1 11.7-2.1 11.7l11.2 4.3c-0.5 0.5-0.8 1.2-0.9 2.1-0.2 1.8 0.7 3.4 2.1 3.5s2.7-1.1 2.9-2.9c0.2-1.7-0.6-3.2-1.9-3.5l-8.4-3.2s0.1-3.9 1.5-8.6l6.2 2.4c-0.5 0.5-0.8 1.2-0.9 2-0.2 1.8 0.7 3.4 2.1 3.5 1.4 0.2 2.7-1.1 2.9-2.9 0.2-1.6-0.5-3-1.6-3.4l-13.1-5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(43.28 472.53) rotate(36.09) scale(.95)">
          <path
            d="m578.7 345.6c-4.1-3.2-8.8-4.2-8.8-4.2l-5.8 8c-0.3-0.5-0.8-0.9-1.4-1.2-1.4-0.6-2.8-0.1-3.3 0.9-0.4 1.1 0.3 2.4 1.7 3 1.3 0.5 2.6 0.2 3.2-0.8l4.3-5.9s3.1 0.9 6.4 3l-3.2 4.4c-0.3-0.5-0.8-0.9-1.4-1.1-1.4-0.6-2.8-0.1-3.3 0.9-0.4 1.1 0.3 2.4 1.7 3 1.2 0.5 2.4 0.2 3-0.6l6.9-9.4z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(159.71 471.07) rotate(171.32) scale(.96)">
          <path
            d="m568 357.6c5.3-0.6 9.3-3.2 9.3-3.2l-1.5-9.8c0.6 0.1 1.2 0.1 1.9-0.2 1.4-0.6 2.1-1.9 1.7-3s-1.9-1.5-3.3-0.9c-1.3 0.5-2 1.7-1.7 2.8l1.1 7.3s-2.9 1.5-6.8 2.4l-0.8-5.5c0.6 0.1 1.2 0.1 1.8-0.2 1.4-0.6 2.1-1.9 1.7-3s-1.9-1.5-3.3-0.9c-1.2 0.5-1.9 1.6-1.8 2.6l1.7 11.6z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(24.09 511.38) rotate(197.93) scale(.95)">
          <path
            d="m574.4 353.9c4.9 1.8 9.6 1.3 9.6 1.3l3-9.4c0.4 0.4 1 0.6 1.7 0.7 1.5 0.1 2.7-0.7 2.8-1.9s-1-2.2-2.5-2.3c-1.4-0.1-2.6 0.6-2.8 1.7l-2.3 7s-3.2 0.1-7.1-0.9l1.7-5.2c0.4 0.4 1 0.6 1.7 0.6 1.5 0.1 2.7-0.7 2.8-1.9s-1-2.2-2.5-2.3c-1.3-0.1-2.4 0.5-2.7 1.5l-3.4 11.1z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(66.9 635.25) rotate(150.69) scale(.82)">
          <path
            d="m579.5 366.7c4-2.1 6.5-5.4 6.5-5.4l-4.2-7.4c0.5-0.1 1-0.3 1.4-0.7 0.9-0.9 1.1-2.2 0.4-2.9s-2-0.6-2.9 0.2-1.1 2-0.5 2.8l3.1 5.5s-1.8 2.1-4.7 4l-2.3-4.1c0.5-0.1 1-0.3 1.4-0.7 0.9-0.9 1.1-2.2 0.4-2.9s-2-0.6-2.9 0.2c-0.8 0.8-1.1 1.8-0.7 2.6l5 8.8z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(738.6 26.34) rotate(45.41) scale(.88)">
          <path
            d="m573.1 353.6c-3.3-3.6-7.4-5.2-7.4-5.2l-6.5 6.4c-0.2-0.5-0.6-1-1.1-1.3-1.2-0.7-2.5-0.6-3.1 0.4-0.6 0.9-0.1 2.2 1.1 2.9 1.1 0.7 2.4 0.6 3-0.2l4.9-4.8s2.7 1.3 5.4 3.7l-3.6 3.6c-0.2-0.5-0.6-0.9-1.1-1.3-1.2-0.7-2.5-0.6-3.1 0.4-0.6 0.9-0.1 2.2 1.1 2.9 1 0.6 2.2 0.6 2.9 0l7.5-7.5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(629.6 541.18) rotate(171.55) scale(1.17)">
          <path
            d="m566.1 378.2c6.4-0.7 11.3-3.9 11.3-3.9l-1.8-12c0.7 0.2 1.5 0.1 2.3-0.2 1.7-0.7 2.6-2.3 2.1-3.6s-2.3-1.8-4-1.2c-1.6 0.6-2.5 2.1-2.1 3.4l1.3 9s-3.5 1.8-8.3 2.9l-1-6.7c0.7 0.2 1.5 0.1 2.2-0.2 1.7-0.7 2.6-2.3 2.1-3.6s-2.3-1.8-4-1.2c-1.5 0.6-2.4 1.9-2.2 3.1l2.1 14.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(1081.4 781.51) rotate(96.01) scale(.86)">
          <path
            d="m593.6 395.6c0.7-4.7-0.7-8.8-0.7-8.8l-8.9-0.9c0.2-0.5 0.3-1 0.3-1.7-0.2-1.3-1.2-2.3-2.2-2.1-1 0.1-1.7 1.3-1.6 2.6 0.2 1.2 1.1 2.2 2 2.1l6.6 0.7s0.7 2.8 0.5 6.4l-4.9-0.5c0.2-0.5 0.3-1 0.3-1.6-0.2-1.3-1.2-2.3-2.2-2.1-1 0.1-1.7 1.3-1.6 2.6 0.2 1.1 0.9 2 1.8 2.1l10.6 1.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(910.88 419.93) rotate(76.46) scale(1.09)">
          <path
            d="m592.9 364c-1.2-5.9-4.5-10.2-4.5-10.2l-11 2.6c0.1-0.7 0-1.4-0.4-2.1-0.8-1.5-2.4-2.2-3.5-1.6-1.2 0.6-1.5 2.3-0.8 3.8 0.7 1.4 2.2 2.1 3.3 1.7l8.2-2s2 3.1 3.4 7.4l-6.1 1.5c0.1-0.6 0-1.4-0.4-2-0.8-1.5-2.4-2.2-3.5-1.6-1.2 0.6-1.5 2.3-0.8 3.8 0.7 1.3 2 2 3.1 1.8l13-3.1z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(352.7 124.53) rotate(124.56) scale(1.1)">
          <path
            d="m589.6 356.5c3.6-4.9 4.6-10.3 4.6-10.3l-9.4-6.5c0.6-0.4 1-1 1.3-1.7 0.6-1.6 0.1-3.3-1.2-3.7-1.3-0.5-2.8 0.4-3.4 2-0.6 1.5-0.1 3.1 1 3.6l7 4.8s-1 3.6-3.3 7.5l-5.2-3.6c0.5-0.4 1-1 1.3-1.7 0.6-1.6 0.1-3.3-1.2-3.7-1.3-0.5-2.8 0.4-3.4 2-0.5 1.4-0.2 2.8 0.7 3.5l11.2 7.8z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(309.96 696.74) rotate(-62.4) scale(.93)">
          <path
            d="m582.1 335.9c-2.5 4.5-2.8 9.1-2.8 9.1l8.5 4.5c-0.4 0.4-0.8 0.9-0.9 1.6-0.3 1.4 0.3 2.7 1.4 3s2.3-0.6 2.6-2c0.3-1.3-0.2-2.6-1.2-3l-6.4-3.3s0.5-3.1 2-6.7l4.7 2.5c-0.4 0.4-0.7 0.9-0.9 1.5-0.3 1.4 0.3 2.7 1.4 3s2.3-0.6 2.6-2c0.3-1.2-0.1-2.4-1-2.9l-10-5.3z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(682.76 213.36) rotate(66.32) scale(1)">
          <path
            d="m595.2 366.3c-2.1-5.1-5.7-8.5-5.7-8.5l-9.5 4.2c0-0.6-0.2-1.3-0.7-1.8-0.9-1.2-2.5-1.6-3.5-0.9s-1 2.3-0.1 3.6c0.9 1.2 2.3 1.6 3.3 1l7.1-3.1s2.3 2.5 4.2 6.2l-5.3 2.3c0-0.6-0.3-1.2-0.7-1.8-0.9-1.2-2.5-1.6-3.5-0.9s-1 2.3-0.1 3.6c0.8 1.1 2.1 1.5 3.1 1.1l11.4-5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(819.82 374.18) rotate(102.49) scale(1.18)">
          <path
            d="m595.4 379.8c1.6-6.3 0.4-12.1 0.4-12.1l-11.9-2.6c0.4-0.6 0.6-1.4 0.6-2.2 0-1.8-1.2-3.3-2.7-3.2-1.4 0-2.6 1.5-2.5 3.4 0 1.7 1.1 3.1 2.4 3.2l8.9 2s0.5 4-0.3 8.8l-6.6-1.5c0.4-0.6 0.6-1.3 0.6-2.2 0-1.8-1.2-3.3-2.7-3.2-1.4 0-2.6 1.5-2.5 3.4 0 1.6 1 2.9 2.1 3.2l14.2 3z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(17.48 176.14) rotate(287.42) scale(1.17)">
          <path
            d="m569.4 340.2c-2.1 6.1-1.5 11.9-1.5 11.9l11.6 3.6c-0.4 0.6-0.7 1.3-0.8 2.1-0.1 1.8 0.9 3.3 2.4 3.4s2.7-1.3 2.8-3.1c0.1-1.7-0.8-3.2-2.1-3.4l-8.6-2.7s-0.1-4 1-8.7l6.4 2c-0.4 0.5-0.7 1.3-0.8 2.1-0.1 1.8 0.9 3.3 2.4 3.4 1.4 0.1 2.7-1.3 2.8-3.1 0.1-1.6-0.7-2.9-1.8-3.3l-13.8-4.2z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(212.9 230.15) rotate(267.43) scale(1.05)">
          <path
            d="m557.8 353.8c0.1 5.8 2.4 10.5 2.4 10.5l10.9-0.5c-0.2 0.6-0.2 1.3 0 2.1 0.5 1.6 1.8 2.5 3.1 2.2 1.2-0.4 1.9-1.9 1.4-3.5-0.4-1.5-1.7-2.4-2.8-2.2l-8.1 0.4s-1.3-3.3-1.8-7.7l6-0.3c-0.2 0.6-0.2 1.3 0 2 0.5 1.6 1.8 2.5 3.1 2.2 1.2-0.4 1.9-1.9 1.4-3.5-0.4-1.4-1.5-2.3-2.6-2.2l-13 0.5z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(254.94 478.3) rotate(174.22) scale(.86)">
          <path
            d="m568 363.5c4.8-0.3 8.5-2.5 8.5-2.5l-0.9-8.9c0.5 0.1 1.1 0.1 1.7-0.1 1.3-0.4 2-1.6 1.6-2.6s-1.6-1.4-2.9-1c-1.2 0.4-1.9 1.5-1.7 2.4l0.7 6.6s-2.6 1.2-6.2 1.8l-0.5-4.9c0.5 0.1 1.1 0.1 1.6-0.1 1.3-0.4 2-1.6 1.6-2.6s-1.6-1.4-2.9-1c-1.1 0.4-1.8 1.3-1.7 2.2l1.1 10.7z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(482.11 478.29) rotate(55.56) scale(1.16)">
          <path
            d="m589.4 343.6c-3.5-5.4-8.4-8.4-8.4-8.4l-9.9 6.8c-0.2-0.7-0.6-1.4-1.2-1.9-1.3-1.2-3.2-1.3-4.1-0.3-0.9 1.1-0.6 2.9 0.7 4.1 1.3 1.1 3 1.3 4 0.4l7.4-5.1s3.2 2.3 6.2 6.1l-5.5 3.8c-0.2-0.7-0.6-1.3-1.2-1.9-1.3-1.2-3.2-1.3-4.1-0.3-0.9 1.1-0.6 2.9 0.7 4.1 1.2 1 2.7 1.3 3.7 0.6l11.7-8z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
        <g transform="translate(656.02 263.84) rotate(311.3) scale(1.04)">
          <path
            d="m575.9 354.7c-3.9 4.2-5.5 9.1-5.5 9.1l8.1 7.1c-0.6 0.3-1.1 0.8-1.4 1.5-0.7 1.4-0.4 3.1 0.7 3.6s2.6-0.1 3.4-1.5c0.7-1.3 0.5-2.9-0.5-3.5l-6-5.3s1.3-3.3 4-6.7l4.5 4c-0.6 0.3-1 0.8-1.4 1.4-0.7 1.4-0.4 3.1 0.7 3.6 1.1 0.6 2.6-0.1 3.4-1.5 0.6-1.2 0.5-2.6-0.3-3.4l-9.7-8.4z">
            <animate attributeName="opacity" calcMode="linear" dur="20s" repeatCount="indefinite"
              values="0;1;1;1;0;0;0;0;0"> </animate>
            <animateTransform attributeName="transform" calcMode="linear" dur="80s" from="360 150 150"
              repeatCount="indefinite" to="0 150 150" type="rotate"> </animateTransform>
          </path>
        </g>
      </g>
    </svg>

  </section>


  <section class="buttonsection">
    <button (click)="this.toggleVisualisation()" aria-label="toggle visualisation" [disabled]="loading">
      {{visualisationOpen ? 'Close' : 'Visualize'}}
    </button>
    <div>
      <button (click)="this.toggleAudioPlayer()" aria-label="toggle music play state">
        <ng-container *ngIf="isPlaying"><svg aria-hidden="true" viewBox="0 0 16 16">
            <path
              d="M2.7 1a.7.7 0 00-.7.7v12.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7H2.7zm8 0a.7.7 0 00-.7.7v12.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-2.6z" />
          </svg></ng-container>

        <ng-container *ngIf="!isPlaying"><svg aria-hidden="true" viewBox="0 0 16 16">
            <path d="M3 1.713a.7.7 0 011.05-.607l10.89 6.288a.7.7 0 010 1.212L4.05 14.894A.7.7 0 013 14.288V1.713z" />
          </svg></ng-container>

      </button>
      <button (click)="this.chooseRandomTrack(true)" aria-label="skip current track">
        <svg aria-hidden="true" viewBox="0 0 16 16">
          <path
            d="M12.7 1a.7.7 0 00-.7.7v5.15L2.05 1.107A.7.7 0 001 1.712v12.575a.7.7 0 001.05.607L12 9.149V14.3a.7.7 0 00.7.7h1.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-1.6z"/>
        </svg>
      </button>
    </div>
  </section>

</header>

<main>
  <ul>
    <li *ngFor="let song of playlistTracks">
      <div>
        <h2>{{song.name}}</h2>
        <small>
          <ng-container *ngFor="let artist of song.artists ; let isLast=last">
            {{artist.name}}{{isLast ? '' : ', '}}</ng-container>
        </small>
      </div>
      <div>
        <small>
          {{song.duration_ms | date:'mm:ss'}}
        </small>
      </div>
    </li>
  </ul>
</main>

<audio #audio (ended)="chooseRandomTrack(true)" preload="auto">
  <source *ngIf="randomSong !== ''" src="{{randomSong}}" type="audio/mp3">
</audio>


<!-- loading animation -->
<main *ngIf="loading">
  <ul>
    <li *ngFor="let item of [].constructor(playlistTotal); let i = index" class="loading">
      <div class="loadAnimation">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </li>
  </ul>
</main>

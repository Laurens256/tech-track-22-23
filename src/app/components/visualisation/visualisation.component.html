<main [ngClass]="{'open' : this.isOpen}">
  <button #filterButton (click)="this.togglePanel(filterButton)" data-panel="filtercontainer" class="filterbtn"
    [attr.tabindex]="isOpen ? '0' : '-1'">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 210.68 210.68">
      <path d="M205.613,30.693c0-10.405-10.746-18.149-32.854-23.676C154.659,2.492,130.716,0,105.34,0
      C79.965,0,56.021,2.492,37.921,7.017C15.813,12.544,5.066,20.288,5.066,30.693c0,3.85,1.476,7.335,4.45,10.479l68.245,82.777v79.23
      c0,2.595,1.341,5.005,3.546,6.373c1.207,0.749,2.578,1.127,3.954,1.127c1.138,0,2.278-0.259,3.331-0.78l40.075-19.863
      c2.55-1.264,4.165-3.863,4.169-6.71l0.077-59.372l68.254-82.787C204.139,38.024,205.613,34.542,205.613,30.693z M44.94,20.767
      C61.467,17.048,82.917,15,105.34,15s43.874,2.048,60.399,5.767c18.25,4.107,23.38,8.521,24.607,9.926
      c-1.228,1.405-6.357,5.819-24.607,9.926c-16.525,3.719-37.977,5.767-60.399,5.767S61.467,44.338,44.94,40.62
      c-18.249-4.107-23.38-8.521-24.607-9.926C21.56,29.288,26.691,24.874,44.94,20.767z M119.631,116.486
      c-1.105,1.341-1.711,3.023-1.713,4.761l-0.075,57.413l-25.081,12.432v-69.835c0-1.741-0.605-3.428-1.713-4.771L40.306,54.938
      C58.1,59.1,81.058,61.387,105.34,61.387c24.283,0,47.24-2.287,65.034-6.449L119.631,116.486z" />
    </svg>
  </button>
  <aside class="hidden filtercontainer panel">
    <section>
      <h2>Toggle Elements</h2>

      <div>
        <label for="danceability">Danceability
          <input #danceability type="checkbox" id="danceability" name="danceability"
            (change)="this.toggleFilters(danceability)" checked>
        </label>


        <label for="energy">Energy
          <input #energy type="checkbox" id="energy" name="energy" (change)="this.toggleFilters(energy)" checked>
        </label>


        <label for="acoustic">Acousticness
          <input #acoustic type="checkbox" id="acoustic" name="acoustic" (change)="this.toggleFilters(acoustic)"
            checked>
        </label>

        <label for="instrumental">Instrumentalness
          <input #instrumental type="checkbox" id="instrumental" name="instrumental"
            (change)="this.toggleFilters(instrumental)" checked>
        </label>

      </div>
    </section>
  </aside>

  <aside *ngIf="isOpen" class="hidden creditscontainer panel">
    <button #closeCreditsButton (click)="this.togglePanel(closeCreditsButton)" data-panel="creditscontainer"></button>
    <h2>Gif Sources:</h2>
    <ul>
      <li *ngFor="let source of gifSource">{{source.name}} via <a href="{{source.source}}"
          target="_blank">{{source.source.split('/')[2].split('.')[0] | titlecase}}</a></li>
    </ul>
  </aside>

  <div attr.data-tooltip="Danceability: {{data.averages.danceability}}" class="dancecontainer danceability"></div>
  <div attr.data-tooltip="Danceability: {{data.averages.danceability}}" class="dancecontainer danceability"></div>
  <div attr.data-tooltip="Danceability: {{data.averages.danceability}}" class="dancecontainer danceability"></div>


  <!-- kamer -->
  <svg id="room" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 454.22 386.5">
    <g stroke-miterlimit="1">
      <!-- zijkant van muur -->
      <polygon points="11.06 277.83 10.83 119.17 .5 114.5 .5 272.72 11.06 277.83" style="fill: #261f27;" />
      <polygon points="443.5 119.39 443.28 263.17 443.28 278.28 453.72 272.72 453.72 114.06 443.5 119.39"
        style="fill: #302d2c;" />

      <!-- zijkant van vloer -->
      <polygon points="227.06 386.06 227.06 371.83 11.04 263.17 11.06 277.83 227.06 386.06" style="fill: #252a2e;" />
      <polygon points="443.28 263.17 227.06 371.83 227.06 386.06 443.28 278.28 443.28 263.17" style="fill: #404040;" />

      <!-- muur -->
      <polygon points="11.04 263.17 226.83 155.17 226.83 10.72 10.83 119.17 11.04 263.17" style="fill: #2a2428;" />
      <polygon points="226.83 155.17 443.28 263.17 443.5 119.39 226.83 10.72 226.83 155.17" style="fill: #1d191c;" />

      <!-- bovenkant van muur -->
      <polygon points="226.83 .5 .5 114.5 10.83 119.17 226.83 10.72 443.5 119.39 453.72 114.06 226.83 .5"
        style="fill: #373737;" />

      <!-- vloer -->
      <polygon points="11.04 263.17 227.06 371.83 443.28 263.17 226.83 155.17 11.04 263.17" style="fill: #282b2c;" />
    </g>

    <!-- energy bolts -->
    <g class="energygroup left"></g>
    <g class="energygroup right"></g>

    <!-- acousticness -->
    <g attr.data-tooltip="Acousticness: {{data.averages.acousticness}}" class="acousticwavegroup topleft acoustic"></g>
    <g attr.data-tooltip="Acousticness: {{data.averages.acousticness}}" class="acousticwavegroup topright acoustic"></g>
    <g attr.data-tooltip="Acousticness: {{data.averages.acousticness}}" class="acousticwavegroup bottomright acoustic">
    </g>
    <g attr.data-tooltip="Acousticness: {{data.averages.acousticness}}" class="acousticwavegroup bottomleft acoustic">
    </g>

    <g attr.data-tooltip="Acousticness: {{data.averages.acousticness}}" class="speakergroup left acoustic"></g>
    <!-- outline van de speaker, wss niet nodig -->
    <!-- <path style="fill:none;" d="M303.29,159.2l-20.9,10.5l0,32l20.9,10.6l21.3,-10.7l0,-32l-21.3,-10.4z" /> -->
    <g attr.data-tooltip="Acousticness: {{data.averages.acousticness}}" class="speakergroup right acoustic"></g>

    <!-- tijdelijke placeholder voor lijstje wat op muur komt te hangen -->
    <path #creditsButton class="creditsbtn" tabindex="0" (click)="this.togglePanel(creditsButton)"
      (keyup.enter)="this.togglePanel(creditsButton)" data-panel="creditscontainer"
      d="M 10 10 H 90 V 90 H 10 L 10 10" />

    <style>
      svg#room * {
        transform-box: fill-box;
        transform-origin: center;
      }

      .energygroup path {
        fill: var(--energy-fill);
        stroke: #000;
        stroke-linejoin: round;
        stroke-width: 2px;
        animation: energyrotate 1500ms linear infinite normal forwards;
      }

      .acousticwavegroup path {
        fill: none;
        stroke: var(--soundwaves);
        stroke-linecap: round;
        animation: acousticwave 1500ms linear infinite normal forwards;
        animation-timing-function: cubic-bezier(0, 1, 1, 0);
        transform-origin: left;
      }

      .speakercircle path {
        stroke: var(--speaker-outer-circle);
        stroke-width: .75px;
        fill: none;
      }

      .speakercircle path:last-of-type,
      .speakercircle path:first-of-type {
        stroke: var(--speaker-inner-circle);
        animation: acousticcircle 1500ms linear infinite normal forwards;
        animation-timing-function: cubic-bezier(0, 1, 1, 0);
        fill: var(--speaker-inner-circle);
      }

      @keyframes energyrotate {
        0% {
          transform: rotate(0);
        }

        10% {
          transform: rotate(0);
        }

        15% {
          transform: rotate(5deg);
        }

        20% {
          transform: rotate(10deg);
        }

        25% {
          transform: rotate(15deg);
        }

        30% {
          transform: rotate(5deg);
        }

        35% {
          transform: rotate(15deg);
        }

        40% {
          transform: rotate(10deg);
        }

        45% {
          transform: rotate(5deg);
        }

        50% {
          transform: rotate(0);
        }

        55% {
          transform: rotate(-5deg);
        }

        60% {
          transform: rotate(-10deg);
        }

        65% {
          transform: rotate(-15deg);
        }

        70% {
          transform: rotate(-5deg);
        }

        75% {
          transform: rotate(-15deg);
        }

        80% {
          transform: rotate(-10deg);
        }

        85% {
          transform: rotate(-5deg);
        }

        90% {
          transform: rotate(0);
        }

        100% {
          transform: rotate(0);
        }
      }

      @keyframes acousticwave {
        0% {
          transform: scale(1);
        }

        20% {
          transform: scale(var(--acousticbounce));
        }

        40% {
          transform: scale(1);
        }

        60% {
          transform: scale(var(--acousticbounce));
        }

        100% {
          transform: scale(1);
        }
      }

      @keyframes acousticcircle {
        0% {
          transform: scale(1);
          filter: brightness(100%);
        }

        20% {
          transform: scale(1.3);
          filter: brightness(80%);
        }

        40% {
          transform: scale(1);
          filter: brightness(100%);
        }

        60% {
          transform: scale(1.5);
          filter: brightness(70%);
        }

        100% {
          transform: scale(1);
          filter: brightness(100%);
        }
      }
    </style>
  </svg>
  <div class="tooltip">
    <p></p>
  </div>
</main>
